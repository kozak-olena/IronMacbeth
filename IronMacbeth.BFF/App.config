<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.7.2" />
  </startup>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
  <system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="IronMacbethBinding" receiveTimeout="00:10:00" sendTimeout="00:10:00" openTimeout="00:10:00" closeTimeout="00:10:00" hostNameComparisonMode="StrongWildcard" maxReceivedMessageSize="33554432" messageEncoding="Mtom" textEncoding="utf-8">
              <security mode="Message">
                <message clientCredentialType="UserName" />
              </security>
            </binding>
            <binding name="IronMacbethAnonymousBinding" receiveTimeout="00:10:00" sendTimeout="00:10:00" openTimeout="00:10:00" closeTimeout="00:10:00" hostNameComparisonMode="StrongWildcard" maxReceivedMessageSize="33554432" messageEncoding="Mtom" textEncoding="utf-8">
              <security mode="Message" />
            </binding>
            <binding name="ServiceToServiceBinding">
                <security mode="Message">
                    <message clientCredentialType="Certificate" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Behavior">
          <serviceAuthorization principalPermissionMode="Always" />
          <serviceMetadata httpGetEnabled="true" />
          <serviceCredentials>
            <serviceCertificate findValue="77f7f5d4aa2d038c4a1324df82f1bbe4" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySerialNumber" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="ServiceToServiceBehavior">
            <clientCredentials>
                <clientCertificate findValue="77f7f5d4aa2d038c4a1324df82f1bbe4" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySerialNumber" />
                <serviceCertificate>
                    <authentication certificateValidationMode="None"/>
                </serviceCertificate>
            </clientCredentials>
        </behavior> 
      </endpointBehaviors>
    </behaviors>
    <services>
      <service behaviorConfiguration="Behavior" name="IronMacbeth.BFF.Service">
        <endpoint address="http://localhost:9998/WCFService" binding="wsHttpBinding" bindingConfiguration="IronMacbethBinding" name="WCFServiceEndpoint" contract="IronMacbeth.BFF.Contract.IService" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:9998/WCFService" />
          </baseAddresses>
        </host>
      </service>
      <service behaviorConfiguration="Behavior" name="IronMacbeth.BFF.AnonymousService">
        <endpoint address="http://localhost:9998/Anonymous" binding="wsHttpBinding" bindingConfiguration="IronMacbethAnonymousBinding" name="AnonymousEndpoint" contract="IronMacbeth.BFF.Contract.IAnonymousService" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:9998/Anonymous" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <client>
        <endpoint
            name="IronMacbeth.UserManagementEndpoint"
            address="http://localhost:9997/UserManagement"
            binding="wsHttpBinding"
            bindingConfiguration="ServiceToServiceBinding"
            behaviorConfiguration="ServiceToServiceBehavior"
            contract="IronMacbeth.UserManagement.Contract.IUserManagementService">
            <identity>
                <certificate encodedValue="MIIDHDCCAgSgAwIBAgIQd/f11KotA4xKEyTfgvG75DANBgkqhkiG9w0BAQsFADAkMSIwIAYDVQQDExlPVklOTllLLU4uaW5mb3B1bHNlLmxvY2FsMB4XDTIwMTEwODE5MDU1OFoXDTIxMTEwODAwMDAwMFowJDEiMCAGA1UEAxMZT1ZJTk5ZSy1OLmluZm9wdWxzZS5sb2NhbDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKphZj3faZly1T8tNA34U5vMb7aX9SyEjmVfCMTcoyEa/Ep9kLWOk7XZ+ARyQne1SGli7sD0FdGoaZPgeVTTv2zSDVbMc0SxkvlHuGRRC1ulqqjyxl34jS83XFFJ9tBbfcbNcVA3MqFdGmjmR66g72NMBIyXa+fLYCJNQoHQ6XW/XyjgZVodhishZNtljJcHdMlPiVzYDWFoam1oLWQHi87Fal/3JQBMm1fHazl6a4Ok9GzDQSkrgSRpaDz/KIMBPHbPEI/wKDgUe3M779lXSNDqr1YVHF3qYx+xRIeLuK1DfPpkkeQ4GMposflsXqjrQnZIa9K9Q3lpTzUPAE1mNe0CAwEAAaNKMEgwCwYDVR0PBAQDAgQwMBMGA1UdJQQMMAoGCCsGAQUFBwMBMCQGA1UdEQQdMBuCGU9WSU5OWUstTi5pbmZvcHVsc2UubG9jYWwwDQYJKoZIhvcNAQELBQADggEBAHR3GpSVDL+rY3f6k69stTM/pIg2/DMZCI7FhHIFeve0Iq284UFV92rFogkHnV493qHVHYQ8r5z4hFuNWea1fakyxtMNc0teSvrSM2/o1Z80UFOQ1A6yOq+J4oEMHEnfQRNmWJSFnAbNlZ+34YMQKzrO/1O6BlHVb2x1M0HW+hpixJK1TAtnZWHea5ES8FiusfjpuyLC1qmvChn9J+AtRftAMEqom5KsGyUwIWz6mCnLPrEwBVwP1LSPMRaURcPDv9fPJ/D2e10tHEzuLTHsaMTead8fy7BvLOypIyl4yeWcBNFU3HrZTQCjFvMtCzyoS6eY+3cnXDSz7AY38LQvFDc=" />
            </identity>
        </endpoint>
        <endpoint
            name="IronMacbeth.FileStorageEndpoint"
            address="http://localhost:5060/FileStorage"
            binding="wsHttpBinding"
            bindingConfiguration="ServiceToServiceBinding"
            behaviorConfiguration="ServiceToServiceBehavior"
            contract="IronMacbeth.FileStorage.Contract.IFileStorageService">
            <identity>
                <certificate encodedValue="MIIDHDCCAgSgAwIBAgIQd/f11KotA4xKEyTfgvG75DANBgkqhkiG9w0BAQsFADAkMSIwIAYDVQQDExlPVklOTllLLU4uaW5mb3B1bHNlLmxvY2FsMB4XDTIwMTEwODE5MDU1OFoXDTIxMTEwODAwMDAwMFowJDEiMCAGA1UEAxMZT1ZJTk5ZSy1OLmluZm9wdWxzZS5sb2NhbDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKphZj3faZly1T8tNA34U5vMb7aX9SyEjmVfCMTcoyEa/Ep9kLWOk7XZ+ARyQne1SGli7sD0FdGoaZPgeVTTv2zSDVbMc0SxkvlHuGRRC1ulqqjyxl34jS83XFFJ9tBbfcbNcVA3MqFdGmjmR66g72NMBIyXa+fLYCJNQoHQ6XW/XyjgZVodhishZNtljJcHdMlPiVzYDWFoam1oLWQHi87Fal/3JQBMm1fHazl6a4Ok9GzDQSkrgSRpaDz/KIMBPHbPEI/wKDgUe3M779lXSNDqr1YVHF3qYx+xRIeLuK1DfPpkkeQ4GMposflsXqjrQnZIa9K9Q3lpTzUPAE1mNe0CAwEAAaNKMEgwCwYDVR0PBAQDAgQwMBMGA1UdJQQMMAoGCCsGAQUFBwMBMCQGA1UdEQQdMBuCGU9WSU5OWUstTi5pbmZvcHVsc2UubG9jYWwwDQYJKoZIhvcNAQELBQADggEBAHR3GpSVDL+rY3f6k69stTM/pIg2/DMZCI7FhHIFeve0Iq284UFV92rFogkHnV493qHVHYQ8r5z4hFuNWea1fakyxtMNc0teSvrSM2/o1Z80UFOQ1A6yOq+J4oEMHEnfQRNmWJSFnAbNlZ+34YMQKzrO/1O6BlHVb2x1M0HW+hpixJK1TAtnZWHea5ES8FiusfjpuyLC1qmvChn9J+AtRftAMEqom5KsGyUwIWz6mCnLPrEwBVwP1LSPMRaURcPDv9fPJ/D2e10tHEzuLTHsaMTead8fy7BvLOypIyl4yeWcBNFU3HrZTQCjFvMtCzyoS6eY+3cnXDSz7AY38LQvFDc=" />
            </identity>
        </endpoint>
    </client>
  </system.serviceModel>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Runtime.CompilerServices.Unsafe" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.6.0" newVersion="4.0.6.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Memory" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.1.1" newVersion="4.0.1.1" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Extensions.Primitives" publicKeyToken="adb9793829ddae60" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.1.9.0" newVersion="3.1.9.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Extensions.Configuration.Abstractions" publicKeyToken="adb9793829ddae60" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.1.9.0" newVersion="3.1.9.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Extensions.DependencyInjection.Abstractions" publicKeyToken="adb9793829ddae60" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.1.9.0" newVersion="3.1.9.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Extensions.Caching.Abstractions" publicKeyToken="adb9793829ddae60" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.1.9.0" newVersion="3.1.9.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Extensions.Options" publicKeyToken="adb9793829ddae60" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.1.9.0" newVersion="3.1.9.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Extensions.Logging.Abstractions" publicKeyToken="adb9793829ddae60" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.1.9.0" newVersion="3.1.9.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Threading.Tasks.Extensions" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.2.0.1" newVersion="4.2.0.1" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Extensions.DependencyInjection" publicKeyToken="adb9793829ddae60" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.1.9.0" newVersion="3.1.9.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.ComponentModel.Annotations" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.2.1.0" newVersion="4.2.1.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration>
